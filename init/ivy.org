#+TITLE: Ivy configuration

* Shortcuts

  These shortcuts replaces isearch with swiper, and some standard
  command (find file, M-x, etc...) with counsel ones.

  #+name: shortcuts
  | Key     | Command                   |
  |---------+---------------------------|
  | C-x C-f | counsel-find-file         |
  | C-s     | swiper                    |
  | C-c C-r | ivy-resume                |
  | M-x     | counsel-M-x               |
  | C-h f   | counsel-describe-function |
  | C-h v   | counsel-describe-variable |

* Package loading

  When ivy is loaded, we have to enable multiple features :
  - virtual buffers, to get recent files and bookmarks in =ivy-switch-buffers=
  - use it as the completion frontend for magit
  - use it as the completion frontend for projectile
  - enable the shortcuts

  #+BEGIN_SRC emacs-lisp :var shortcuts=shortcuts
    (defun my-setup-ivy ()
      (ivy-mode 1)
      (setq ivy-use-virtual-buffers t)

      (eval-after-load 'magit
        '(setq magit-completing-read-function (quote ivy-completing-read)))

      (eval-after-load 'projectile
        '(setq projectile-completion-system (quote ivy)))

      (my-set-global-keys-from-org-table shortcuts))

    (use-package ivy
      :ensure
      :init (my-setup-ivy))

    (use-package counsel
      :ensure)

    (use-package swiper
      :ensure)
  #+END_SRC
